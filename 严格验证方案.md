
# 严格验证方案

## 🧪 目标 (Goal)
为了避免 AI 过拟合历史数据（例如 2024年9月的爆发），我们采用 **Train-Test Split (训练-测试分离)** 和 **Rolling Validation (滚动回测)** 方法，严格检验选股逻辑的泛化能力。

---

## 📅 数据切分 (Data Split)

我们有从 2024-09-01 到 2026-02-07 的数据（约 17 个月）。

1.  **训练集 (Train)**: 前 70% (2024.09 - 2025.08)
    *   **作用**：让 AI 在这段时间内寻找最佳权重参数。
2.  **测试集 (Test)**: 后 30% (2025.09 - 2026.02)
    *   **作用**：完全不给 AI 看这段数据。我们将训练好的参数直接应用，模拟“真实的未来交易”。

---

## 🔍 验证指标 (Validation Metrics)

如果通过了测试，必须满足以下条件：

1.  **夏普比率 (Sharpe Ratio)**: 测试集年化夏普比率 > 1.0。
2.  **胜率 (Win Rate)**:
    *   假设每 20 天调仓一次，测试集胜率需显著 > 50% (通过二项检验，p-value < 0.05)。
3.  **回撤控制 (Max Drawdown)**: 测试集最大回撤需小于基准指数同期回撤。

---

## 🛠️ 实施步骤 (Steps)

1.  **数据清洗**：
    *   剔除 ST、停牌、上市不足 60 天的新股。
    *   对每只股票计算 1~20 日涨幅 (Return)。
    *   对每只股票计算未来 20 日涨幅 (Forward Return)。

2.  **特征工程**：
    *   将 1~20 日涨幅转化为截面排名 (Rank 0~1)。
    *   **标准化**：由于不同时期市场波动率不同，排名比绝对收益更能捕捉相对强弱。

3.  **模型训练 (Differential Evolution)**：
    *   在训练集上，寻找一组权重 W，使得加权后的得分与未来收益的相关性最大。
    *   **目标函数**：最大化训练集上的 IC (Rank IC)。

4.  **样本外回测**：
    *   锁定权重 W，应用到测试集。
    *   按得分选出 Top 4 股票。
    *   计算每日净值曲线，与基准指数对比。

5.  **统计检验**：
    *   对策略超额收益序列进行 T 检验。
    *   如果 p-value < 0.05，则认为超额收益是真实的，非运气。

---

## ⚠️ 成功标准

只有当 **测试集年化超额收益 > 10%** 且 **胜率显著** 时，我们才认为找到了可靠的规律。如果你发现训练集很好，但测试集很差（例如甚至是负收益），说明之前的 AI 结果是严重的过拟合。
